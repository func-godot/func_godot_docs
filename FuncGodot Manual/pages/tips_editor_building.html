<!DOCTYPE html>
<html lang="en-US">
<head>
    <title>FuncGodot Manual</title>
    <link rel="icon" type="image/x-icon" href="../images/godot_ranger.svg">
    <link rel="stylesheet" href="../styles.css">
</head>
<body>
    <div class="main">
        <h1>Building from Map Editors</h1>
        <p>
            Much like idTech engine games, it's possible to build and launch directly into a map from NetRadiant Custom and TrenchBroom alike.
            This can be quite a helpful tool for mappers to quickly try out their creations without a lengthy startup or debug menu process.
        </p>
        
        <h2>Godot project setup example</h2>

        <p>
            Regardless of which map editor you use, you'll need to check for any 
            <a href="https://docs.godotengine.org/en/stable/classes/class_os.html#class-os-method-get-cmdline-user-args">command line arguments.</a>

            <p align=center><img src="../images/tips_editorbuild_1.png"><br></p>
            
            A basic example might look something like this:

        </p>

        <code><pre>
        # Somewhere in a script called when your project opens. Make sure you have a 
        # valid reference to a FuncGodot map or create one and apply your map settings to it.

        var func_godot_map: FuncGodotMap

        var map_override: String
        var cmd_line_args := OS.get_cmdline_user_args()

        for arg in cmd_line_args:
            # Example argument, with a known delimiter.
            if arg.contains("launch_debug::"):
                var split := arg.split("::")

                # Basic input validation
                if split.size != 2:
                return

                map_override = arg.split("::")[1]

                func_godot_map.local_map_file = map_override
                func_godot_map.verify_and_build()
        </code></pre>


        <h2>TrenchBroom</h2>

        <p>
            The TrenchBroom documenation <a href="https://trenchbroom.github.io/manual/latest/#launching_game_engines">covers this part nicely</a>.
        </p>

        <h2>NetRadiant Custom</h2>

        <p>
            NetRadiant itself provides some basic scripting for this process, defined in the gamepack folder. 
            
            The path to our default build profiles can be found in your NetRadiant gamepack folder. This is something defined in your 
            <a href = https://func-godot.github.io/func_godot_docs/FuncGodot%20Manual/pages/ref_netradiant_custom_resources.html#GamepackConfig>NetRadiantCustomGamePackConfig</a>.

            IF you haven't set this up, you'll need to first complete <a href = https://func-godot.github.io/func_godot_docs/FuncGodot%20Manual/pages/guide_map_editor_config.html#NetRadiantCustom>creating your NetRadiantCustomGamePackConfig.</a>

            We'll use an example from Sinewave's game SLAMFIRE: <code class="highlight">&ltpath_to_radiant>\gamepacks\sfbase.game\default_build.xml</code>.
        </p>
        <p>

        </p>
            First, in Radiant, navigate to <code class="highlight">Build > Customize...</code>.
            
            Here, we can see some build variables available:
            <p align=center><img src="../images/tips_editorbuild_radiant1.png"><br></p>

            To create an entry, open up the default build profile (mentioned above). 
            You can issue a command to execute depending on the currently running platform like so:

            <code><pre>
                &lt?xml version="1.0"?>
                &ltproject version="2.0">
                &ltvar name="game">"[EnginePath]sf.[ExecutableType]"&lt/var>
                &ltbuild name="Test map in engine">
                &ltcommand>[game] -- launch_debug::"[MapFile]"&lt/command>
                &lt/build>
            </code></pre>

            Restart NetRadiant, and you should see a new option in the build menu.
            <p align=center><img src="../images/tips_editorbuild_radiant2.png"><br></p>
        
            <p align=center><img src="../images/tips_editorbuild_radiant3.png"><br></p>
            
            Selecting your new option will run the executable you defined above!
            
        </p>

        
    </div>
    <br><br><br>
</body>
</html>